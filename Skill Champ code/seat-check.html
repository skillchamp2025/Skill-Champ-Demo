<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student - Seat Finder</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #eef2f7; }
    .card { max-width: 500px; margin: 40px auto; border-radius: 12px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <div class="container">
    <h2 class="text-center text-success mt-4">üéì Student Seat Finder</h2>

    <div class="card p-4">
      <label>Enter Your Roll Number</label>
      <input type="text" id="searchRoll" class="form-control mb-3" placeholder="e.g. 101">
      <button class="btn btn-primary w-100" onclick="searchSeat()">Find My Seat</button>
      <div id="student-result" class="mt-3"></div>
    </div>
  </div>

  <script>
  const seatPlan = JSON.parse(localStorage.getItem("seatPlan") || "[]");
  

  function searchSeat() {
    const roll = document.getElementById("searchRoll").value.trim();
    const resultDiv = document.getElementById("student-result");

    if (!seatPlan.length) {
      resultDiv.innerHTML = `<div class="alert alert-warning">‚ö† Seat plan not generated yet. Please contact admin.</div>`;
      return;
    }

    if (!roll) {
      resultDiv.innerHTML = `<div class="alert alert-warning">‚ö† Please enter roll number!</div>`;
      return;
    }

    let found = null;
    seatPlan.forEach(room => {
      room.seats.forEach(seat => {
        seat.students.forEach(s => {
          if (s.roll === roll) {
            found = {
              name: s.name,
              roll: s.roll,
              dept: s.dept,
              room: room.room,
              benchNo: seat.benchNo
            };
          }
        });
      });
    });

    if (found) {
      resultDiv.innerHTML = `<div class="alert alert-success">
        ‚úÖ <b>${found.name}</b> (Roll: ${found.roll})<br>
        Room: <b>${found.room}</b> | Bench No: <b>${found.benchNo}</b> | Dept: ${found.dept}
      </div>`;
    } else {
      resultDiv.innerHTML = `<div class="alert alert-danger">‚ùå Roll not found!</div>`;
    }
  }
</script>
</body>
</html>